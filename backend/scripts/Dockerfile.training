FROM python:3.10-slim

WORKDIR /app

# Install Python dependencies
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Copy the training scripts and the runner script
COPY 1_preprocess_data.py .
COPY 2_train_model.py .
COPY run_training_pipeline.sh .

# Make the runner script executable
RUN chmod +x run_training_pipeline.sh

# This is the command that Vertex AI will run inside the container
CMD ["./run_training_pipeline.sh"]